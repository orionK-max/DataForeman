# Env contract for DataForeman

########################################
# Global logging settings
########################################
# Root logs directory (host path mounted into containers)
LOG_DIR=./logs
# Retention in days for dated files (used by retention scripts)
LOG_RETENTION_DAYS=14
# Logging manifest (component -> pattern with %DATE%)
LOG_COMPONENTS=./ops/logging.components.json
# Rotation period in minutes (default 1440 = daily). All logs follow this.
# For development/testing you can set to 10 to rotate every 10 minutes.
LOG_ROTATE_PERIOD_MINUTES=1440
# Pretty console logs for local dev (core/connectivity where supported)
LOG_CONSOLE=0
# Max bytes for /logs responses (default 256KB, hard cap 5MB)
LOG_MAX_RESPONSE_BYTES=262144
# Max file upload size in bytes (default 10MB)
MAX_FILE_SIZE_BYTES=10485760

########################################
# Core service
########################################
# Core API external port (default: 3000)
# Set to a different port if running multiple instances or avoiding conflicts
# CORE_PORT=3001
PORT=3000
HOST=0.0.0.0
LOG_LEVEL=info
# Core writes to this symlink; rotator manages the dated targets
LOG_FILE=./logs/core/core.current
JWT_SECRET=change-me
# Initial admin email (default login email)
ADMIN_EMAIL=admin@example.com
# Initial admin password (only used if admin has no password yet). CHANGE IN PROD.
ADMIN_PASSWORD=password # run: docker compose up -d --force-recreate core to apply

# Development-only flag to expose convenience endpoints and bypass auth on /logs/*.
# Set to 1 during local dev; leave unset or 0 in any shared/prod environment.
AUTH_DEV_TOKEN=0

# Demo mode - creates unique demo users for each visitor
# When enabled, visitors can create temporary accounts with limited permissions
# - Can create/manage their own dashboards and charts
# - Read-only access to connections (cannot modify)
# - Automatically deleted after DEMO_INACTIVE_MINUTES of inactivity
DEMO_MODE=0
DEMO_INACTIVE_MINUTES=60
DEMO_PASSWORD_PREFIX=Demo

########################################
# Main Postgres (app DB)
########################################
PGHOST=localhost
PGPORT=5432
PGUSER=postgres
PGPASSWORD=postgres
PGDATABASE=dataforeman
DATABASE_URL=

########################################
# TimescaleDB (TSDB)
########################################
TSDB_HOST=localhost
TSDB_PORT=5433
TSDB_USER=tsdb
TSDB_PASSWORD=tsdb
TSDB_DATABASE=telemetry

########################################
# NATS
########################################
NATS_URL=nats://localhost:4222

########################################
# Connectivity service
########################################
# (Uses LOG_LEVEL and LOG_FILE internally)
# LOG_FILE=./logs/connectivity/connectivity.current

########################################
# Ingestor service
########################################
# Uses file logging by default in the container via pino destination.
# For local runs you can override the path if desired:
# LOG_FILE=./logs/ingestor/ingestor.current

########################################
# Rotator/ops
########################################
# (Uses LOG_DIR, LOG_COMPONENTS, LOG_ROTATE_PERIOD_MINUTES)

########################################
# Caddy (TLS reverse proxy, optional)
########################################
# No env required by default in dev profile

########################################
# Web (frontend)
########################################
VITE_CORE_URL=http://localhost:3000
# Frontend nginx port (default: 8080)
# Set to a different port if running multiple instances or avoiding conflicts
# FRONT_PORT=8081

########################################
# Misc
########################################
NODE_ENV=development
DEMO_MODE=0
